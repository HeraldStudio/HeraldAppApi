---
title: 小猴偷米nginx日志分析请求 
layout: post
date: 2016-12-08 18:22:54
tags: 小猴app api文档

---

## 设计驱动

* 目的: 通过分析日志总结我们目前的工作状态以及每日的请求情况, 不断完善服务质量

* 功能简介: 读取数据库中每日日志信息并进行返回

* 系统设计: 1. 返回某一日的所有日志统计信息
*           2. 返回从当日开始的连续几天的统计信息


## 请求设计

以`127.0.0.1`为例, 使用为`post`请求方式传递参数

[127.0.0.1/herald/api/v1/log](127.0.0.1/herald/api/v1/log)

| 参数         | 含义         | 示例        |
| -----      | ----       | :-------: |
| date_start | 日志开始日期     | 20161024  |
| date_cnt   | 请求天数(默认为1) | 1         |

## 返回值及其意义

```json
{
  "content": [                      # 该对象为数组, 每条记录均为如下形式
    {
      "every_hour_count": {         # 每小时访问数
        "20": 4601, 
        "21": 4498, 
        ...
      }, 
      "ios_version": {              # ios版本信息
        "9.0.1": 7, 
        ...
      }, 
      "device_distribute": {        # 设备分布情况
        "web": 685, 
        ...
      }, 
      "android_version": {          # android 版本信息
        "": 56554
      }, 
      "date": 20161024,             # 该条记录的信息
      "api_order": {                # 每日每个api访问次数
        "library": 4630, 
        "sidebar": 575, 
        ...
      }, 
      "call_count": 80574           # 每日请求总数
    }, 
    ...
  ], 
  "code": 200
}
```


